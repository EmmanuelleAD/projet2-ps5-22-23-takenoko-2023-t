


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > Jeu</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">fr.cotedazur.univ.polytech.startingpoint</a>
</div>

<h1>Coverage Summary for Class: Jeu (fr.cotedazur.univ.polytech.startingpoint)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Jeu</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (16/16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    93,3%
  </span>
  <span class="absValue">
    (98/105)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package fr.cotedazur.univ.polytech.startingpoint;
&nbsp;
&nbsp;import java.lang.reflect.Array;
&nbsp;import java.util.*;
&nbsp;
&nbsp;public class Jeu {
&nbsp;
&nbsp;    private List&lt;Joueur&gt; joueurs;
&nbsp;    private List&lt;Parcelle&gt; parcellesPlacees;
&nbsp;    private List&lt;Position&gt; placementsPossibles;
&nbsp;    private List&lt;Objectif&gt; cartesObjectis;
&nbsp;
&nbsp;    public List&lt;ObjectifParcelle&gt; getObjectifsParcelles() {
<b class="fc">&nbsp;        return objectifsParcelles;</b>
&nbsp;    }
&nbsp;
&nbsp;    public List&lt;ObjectifJardinier&gt; getObjectifsJardinier() {
<b class="fc">&nbsp;        return objectifsJardinier;</b>
&nbsp;    }
&nbsp;
&nbsp;    private List&lt;ObjectifParcelle&gt; objectifsParcelles;
&nbsp;    private List&lt;ObjectifJardinier&gt; objectifsJardinier;
&nbsp;
&nbsp;
&nbsp;    public Jardinier getJardinier() {
<b class="fc">&nbsp;        return jardinier;</b>
&nbsp;    }
&nbsp;
&nbsp;    private Jardinier jardinier;
&nbsp;    private static final int MAX_CARTES_OBJECTIFS = 46;
&nbsp;
&nbsp;    private int nombreObjectifs;
&nbsp;
&nbsp;
<b class="fc">&nbsp;    public Jeu(Joueur joueur1, Joueur joueur2) {</b>
<b class="fc">&nbsp;        joueurs = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        joueurs.add(joueur1);</b>
<b class="fc">&nbsp;        joueur1.setCerveau(new CerveauJardinier(joueur1));</b>
<b class="fc">&nbsp;        joueurs.add(joueur2);</b>
<b class="fc">&nbsp;        joueur2.setCerveau(new CerveauParcelle(joueur2));</b>
<b class="fc">&nbsp;        this.parcellesPlacees = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.placementsPossibles = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.cartesObjectis = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.objectifsParcelles=new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.objectifsJardinier=new ArrayList&lt;&gt;();</b>
&nbsp;
&nbsp;    }
<b class="fc">&nbsp;    public Jeu(List&lt;Joueur&gt;joueurs) {</b>
<b class="fc">&nbsp;        this.joueurs = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;       this.joueurs.addAll(joueurs);</b>
<b class="fc">&nbsp;        this.parcellesPlacees = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.placementsPossibles = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.cartesObjectis = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.objectifsParcelles=new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.objectifsJardinier=new ArrayList&lt;&gt;();</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    public List&lt;Parcelle&gt; getParcellesPlacees() {
<b class="fc">&nbsp;        return parcellesPlacees;</b>
&nbsp;    }
&nbsp;
&nbsp;    public List&lt;Position&gt; getPlacementsPossibles() {
<b class="fc">&nbsp;        return placementsPossibles;</b>
&nbsp;    }
&nbsp;    public List&lt;Joueur&gt; getJoueurs() {
<b class="fc">&nbsp;        return joueurs;</b>
&nbsp;    }
&nbsp;    public int getNombreObjectifs() {
<b class="fc">&nbsp;        return nombreObjectifs;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void initialisation() {
<b class="fc">&nbsp;        switch (joueurs.size()) {</b>
&nbsp;            case 2:
<b class="fc">&nbsp;                nombreObjectifs = 9;</b>
<b class="fc">&nbsp;                break;</b>
&nbsp;            case 3:
<b class="nc">&nbsp;                nombreObjectifs = 8;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 4:
<b class="fc">&nbsp;                nombreObjectifs = 7;</b>
&nbsp;                break;
&nbsp;        }
<b class="fc">&nbsp;        this.jardinier = new Jardinier();</b>
<b class="fc">&nbsp;        Parcelle etang = new Parcelle(new Position(0, 0));</b>
<b class="fc">&nbsp;        parcellesPlacees.add(etang);</b>
<b class="fc">&nbsp;        placementsPossibles = Parcelle.positionsPossibleEnTenantCompteDeCellesPlacees(this.parcellesPlacees, placementsPossibles);</b>
<b class="fc">&nbsp;        Collections.sort(joueurs, Joueur.tailleComparator.reversed());</b>
&nbsp;        //placementsPossibles.addAll(List.of(etang.getPosition().positionsAdjacentes()));
<b class="fc">&nbsp;        for (int i = 0; i &lt; 4 ; i++) {</b>
&nbsp;
<b class="fc">&nbsp;            objectifsParcelles.addAll(ObjectifParcelle.objectifParcelles);</b>
<b class="fc">&nbsp;            objectifsJardinier.addAll(ObjectifJardinier.objectifsJardinier);</b>
&nbsp;        }
<b class="fc">&nbsp;        for (Joueur joueur : joueurs</b>
&nbsp;        ) {
<b class="fc">&nbsp;            joueur.getCartesObjectifs().add(objectifsParcelles.get(objectifsParcelles.size() - 1)); //donner une carte de chaque catégorie</b>
<b class="fc">&nbsp;            objectifsParcelles.remove(objectifsParcelles.size() - 1);</b>
<b class="fc">&nbsp;            joueur.getCartesObjectifs().add(objectifsJardinier.get(objectifsJardinier.size() - 1));</b>
<b class="fc">&nbsp;            objectifsJardinier.remove(objectifsJardinier.size() - 1);</b>
<b class="fc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public void jouerUnTour(List&lt;Joueur&gt; joueurs) {
&nbsp;
&nbsp;
<b class="fc">&nbsp;        for (Joueur j : joueurs) {</b>
<b class="fc">&nbsp;            Action action = j.jouer(this);</b>
<b class="fc">&nbsp;            if (action.getNomAction().equals(&quot;Parcelle&quot;)) {</b>
<b class="fc">&nbsp;                if (nombreObjectifs==-2){</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
<b class="fc">&nbsp;                traiterActionParcelle(j, action);</b>
&nbsp;
<b class="fc">&nbsp;            } else if (action.getNomAction().equals(&quot;Jardinier&quot;)) {</b>
<b class="fc">&nbsp;                traiterActionJardinier(j,action);</b>
&nbsp;            }
<b class="fc">&nbsp;            else if (action.getNomAction().equals(&quot;Piocher&quot;)) {</b>
<b class="fc">&nbsp;                traiterActionPiocher(j,action);</b>
&nbsp;            }
<b class="fc">&nbsp;            List&lt;Objectif&gt; aSupp=new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;            for (Objectif o : j.getCartesObjectifs()</b>
&nbsp;            ) {
&nbsp;
<b class="fc">&nbsp;                if (o.estValide(parcellesPlacees)) {</b>
<b class="fc">&nbsp;                    j.addScore(o.getPoints());</b>
<b class="fc">&nbsp;                    System.out.println(&quot;L&#39;objectif &quot; + o.getDescription() + &quot; de &quot; + o.getPoints() + &quot; points est validé&quot;);</b>
<b class="fc">&nbsp;                    System.out.println(&quot;Le score de &quot; + j.getNom() + &quot; est &quot; + j.getScore());</b>
<b class="fc">&nbsp;                    nombreObjectifs--;</b>
<b class="fc">&nbsp;                    aSupp.add(o);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;            }</b>
<b class="fc">&nbsp;            j.getCartesObjectifs().removeAll(aSupp);</b>
<b class="fc">&nbsp;            if (nombreObjectifs == 0) {</b>
<b class="fc">&nbsp;                nombreObjectifs--;// to be sure that this condition won&#39;t be executed twice</b>
<b class="fc">&nbsp;                j.addScore(2);</b>
<b class="fc">&nbsp;                Joueur joueurDernierTour = j;</b>
<b class="fc">&nbsp;                System.out.println(&quot;Le joueur &quot; + j.getNom() + &quot; a declenché le dernier tour et remporte le bonus de 2 points&quot;);</b>
<b class="fc">&nbsp;                List&lt;Joueur&gt; joueursSansGagnant = new ArrayList(joueurs);</b>
<b class="fc">&nbsp;                joueursSansGagnant.remove(j);</b>
<b class="fc">&nbsp;                jouerUnTour(joueursSansGagnant);</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    private void traiterActionPiocher(Joueur j, Action action) {
<b class="fc">&nbsp;        ActionPiocher api=(ActionPiocher) action;</b>
<b class="fc">&nbsp;        j.getCartesObjectifs().add(api.getObjectif());</b>
<b class="fc">&nbsp;        System.out.println(j.getNom() + api.getDescription());</b>
&nbsp;    }
&nbsp;
&nbsp;    public List&lt;Joueur&gt; getGagnant() {
&nbsp;
<b class="fc">&nbsp;        Collections.sort(joueurs, Joueur.scoreComparator.reversed());</b>
<b class="fc">&nbsp;        List&lt;Joueur&gt; joueurGagnant=new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        int maxValeur=joueurs.get(0).getScore();</b>
<b class="fc">&nbsp;        for (Joueur joueur: joueurs){</b>
<b class="fc">&nbsp;            if (maxValeur==joueur.getScore()){</b>
<b class="fc">&nbsp;                joueurGagnant.add(joueur);</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return joueurGagnant;</b>
&nbsp;    }
&nbsp;
&nbsp;    void traiterActionParcelle(Joueur j, Action action) {
<b class="fc">&nbsp;        ActionParcelle ap = (ActionParcelle) action;</b>
<b class="fc">&nbsp;        Parcelle nouvelleParcelle = ap.getParcelle();</b>
<b class="fc">&nbsp;        this.parcellesPlacees.add(nouvelleParcelle);</b>
<b class="fc">&nbsp;        placementsPossibles = Parcelle.positionsPossible(this.parcellesPlacees, placementsPossibles);</b>
<b class="fc">&nbsp;        System.out.println(j.getNom() + ap.getDescription());</b>
&nbsp;
&nbsp;    }
&nbsp;    void traiterActionJardinier(Joueur j,Action action){
<b class="fc">&nbsp;        ActionJardinier aj=(ActionJardinier) action;</b>
<b class="fc">&nbsp;        getJardinier().move(aj.getParcelle(),getParcellesPlacees());</b>
&nbsp;
<b class="fc">&nbsp;        System.out.println(j.getNom() + aj.getDescription());</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public void jouer() {
<b class="fc">&nbsp;        while (nombreObjectifs &gt; 0) {</b>
<b class="fc">&nbsp;            jouerUnTour(joueurs);</b>
&nbsp;        }
<b class="fc">&nbsp;        List&lt;Joueur&gt; joueurGagnant=getGagnant();</b>
<b class="fc">&nbsp;        if (joueurGagnant.size()==1){</b>
<b class="fc">&nbsp;            Joueur joueur = joueurGagnant.get(0);</b>
<b class="fc">&nbsp;            System.out.println(joueur.getNom() + &quot; a gagné avec un score de &quot; + joueur.getScore());</b>
<b class="fc">&nbsp;        } else {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Égalité! les joueurs suivants ont gagnés :&quot;);</b>
<b class="nc">&nbsp;            for (Joueur joueur: joueurGagnant){</b>
<b class="nc">&nbsp;                System.out.println(joueur.getNom() + &quot; a gagné avec un score de &quot; + joueur.getScore());</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;
&nbsp;
&nbsp;}
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-01-26 12:04</div>
</div>
</body>
</html>
